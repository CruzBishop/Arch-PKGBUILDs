# Maintainer: Dicebot <m.strashun@gmail.com>
pkgname=vibed
pkgver=0.7.7
pkgrel=0
pkgdesc="Asynchronous I/O web framework written in D"
arch=('i686' 'x86_64')
url="http://vibed.org"
license=('MIT')
depends=('dmd>=2.060' 'libevent' 'openssl')
makedepends=('unzip')
backup=('/etc/vibe/vibe.conf')
install='vibed.install'
source=("vibed.zip::http://vibed.org/download?file=zipball/v${pkgver}")
md5sums=('01018fa20372d7b9a9ee1b5957963356')

_zipdir=rejectedsoftware-vibe.d-15ce43a

build() {
    cd "$srcdir/$pkgname-$pkgver"
    unzip vibed.zip 
}

package() {
    cd "$srcdir/$pkgname-$pkgver/$_zipdir" 
    install -Dm755 ./bin ${pkgdir}/usr/share/vibe/bin
    install -Dm644 ./source ${pkgdir}/usr/share/vibe/source
    install -Dm644 ./benchmark ${pkgdir}/usr/share/vibe/benchmark
    install -Dm644 ./examples ${pkgdir}/usr/share/vibe/examples
    install -Dm644 ./LICENSE.txt ${pkgdir}/usr/share/vibe/LICENSE.txt
    install -Dm644 ./LICENSE_DE.txt ${pkgdir}/usr/share/vibe/LICENSE_DE.txt
}
